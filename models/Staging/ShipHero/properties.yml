version: 2
models:
  - name: ShipHeroInventoryChanges
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['user_id', 'account_id', 'warehouse_id', 'sku', 'created_at']
      partition_by: { 'field': 'created_at', 'data_type': 'datetime' }
      cluster_by: ['user_id', 'account_id', 'warehouse_id', 'sku'] 

  - name: ShipHeroOrders
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'legacy_id', 'order_number', 'partner_order_id', 'order_date']
      partition_by: { 'field': 'order_date', 'data_type': 'datetime' }
      cluster_by: ['id', 'legacy_id', 'order_number', 'partner_order_id'] 

  - name: ShipHeroProducts
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'legacy_id', 'account_id', 'sku', 'created_at']
      partition_by: { 'field': 'created_at', 'data_type': 'datetime' }
      cluster_by: ['id', 'legacy_id', 'account_id', 'sku'] 

  - name: ShipHeroPurchaseOrders
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'legacy_id', 'account_id', 'warehouse_id', 'created_at']
      partition_by: { 'field': 'created_at', 'data_type': 'datetime' }
      cluster_by: ['id', 'legacy_id', 'account_id', 'warehouse_id'] 

  - name: ShipHeroReturns
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'legacy_id', 'account_id', 'order_id', 'created_at']
      partition_by: { 'field': 'created_at', 'data_type': 'datetime' }
      cluster_by: ['id', 'legacy_id', 'account_id', 'order_id'] 

  - name: ShipHeroShipments
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'order_id', 'user_id', 'warehouse_id', 'created_date']
      partition_by: { 'field': 'created_date', 'data_type': 'datetime' }
      cluster_by: ['id', 'order_id', 'user_id', 'warehouse_id'] 

  - name: ShipHeroWarehouseProducts
    config:
      materialized: incremental
      incremental_strategy: merge
      unique_key: ['id', 'account_id', 'sku', 'warehouse_id', 'created_at']
      partition_by: { 'field': 'created_at', 'data_type': 'datetime' }
      cluster_by: ['id', 'account_id', 'sku', 'warehouse_id'] 

